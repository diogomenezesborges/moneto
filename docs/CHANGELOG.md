# Changelog

> **Full version history for Moneto (Moneto)**
>
> For current work status, see [WORK_STATUS.md](./WORK_STATUS.md)

---

| Date       | Version | Changes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ---------- | ------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 2026-02-11 | 2.29    | **âœ… Performance Optimization - Auto-Validation Hooks + Critical Context**: Implemented automated TypeScript validation and added 5 critical documentation sections based on insights analysis of 51 sessions (250 hours). **Hook**: Added `PostToolUse` hook to auto-run `tsc --noEmit` after every Edit/Write operation - catches TypeScript errors immediately instead of at build time. **New Sections**: (1) Rate Limit Awareness - commit incrementally to prevent lost work; (2) Project Stack - mandatory build verification steps; (3) Git Workflow - branch strategy and commit protocols; (4) Task Completion - prevent forgotten instructions; (5) Server & Dev Environment - UI verification checklist. **Impact**: Addresses 35 buggy code instances, 10+ rate limit issues, and task tracking failures. |
| 2026-02-05 | 2.28    | **âš ï¸ Workflow Exception Protocol Clarification**: Updated Exception Handling section with mandatory call-and-response protocol to prevent future workflow violations. **Background**: On 2026-02-05, AI agent pushed 8 commits directly to main during emergency production fixes (database backup failures, transaction creation bugs, pagination performance issues). Agent incorrectly assumed "GO GO GO" = permission. **Changes**: Added explicit confirmation requirement - AI MUST ask "Should I push directly to main? If yes, please respond with: 'commit directly to main'" and WAIT for exact phrase. Added examples of correct/incorrect behavior. **Related**: See Issue #117 for incident documentation. **Status**: All emergency fixes were valid and production is stable.                           |
| 2026-02-04 | 2.27    | **âœ… Filter Improvements & Bank Normalization (Issues #98, #96)**: Deployed to production. **Issue #98 (PR #103)**: Sort all filter dropdowns alphabetically using `localeCompare()` - Origin, Bank, Major Category, Category filters now sorted for better UX. **Issue #96 (PR #104)**: Eliminate duplicate banks caused by casing variations - created `getUniqueBanks()` helper, normalized WiZink as canonical form, applied normalization in filtering. **Testing**: âœ… 90/90 tests passed, linting passed, preview verified. **Production**: Both fixes deployed successfully (13:06-13:08 UTC) to https://moneto.vercel.app/. **Impact**: Improved filter usability, eliminated confusion from duplicate bank entries.                                                                                          |
| 2026-02-03 | 2.26    | **ðŸŽ‰ Issue #36 - State Management Migration Phase 2 COMPLETE (PR #88)**: Migrated all remaining features to TanStack Query (2,873 lines total). **Transactions** (789 lines): 6 TanStack Query hooks, removed fetchTransactions() calls, fixed property names. **Review** (1,062 lines): Added useReviewTransactions() + useReviewAction(), removed local ReviewTransaction type, fixed type compatibility (flaggedâ†’isFlagged). **CashFlow** (1,022 lines): Added useCashFlowData() + useBanks(), removed 3 useEffect hooks, maintained UI state. **Infrastructure**: Added duplicateOf field to Transaction interface. **Build**: âœ… Compiled successfully (7.4s). All core features now use TanStack Query.                                                                                                          |
| 2026-02-03 | 2.25    | **ðŸš€ Issue #36 - State Management Migration Phase 1 + Bug Fixes (PR #88)**: Successfully migrated Rules and Stats features to TanStack Query. **Infrastructure**: Added `useApplyRulesToPending()` and `useCreateTransaction()` mutations. **Rules Feature**: Migrated to `useRules()`, `useCreateRule()`, `useDeleteRule()` with automatic caching and optimistic updates. **Stats Feature**: Migrated to `useTransactions()` with updated `useStats` hook. **Bug Fixes**: âœ… #95 - Fixed category filter subcategories. âœ… #100 - Added keyboard navigation to CategorySelector (Arrow keys + Enter). âœ… #93 - Improved Add Transaction dialog layout, removed Balance/Status fields, fixed z-index issues. **Build**: âœ… Compiled successfully (8.5s).                                                              |
| 2026-02-02 | 2.24    | **Production Blockers Fixed (Issues #75-#82)**: All 8 production blockers discovered during pre-deployment testing have been resolved and verified. **Dark Mode**: Fixed invisible text in tag/category search inputs, fixed white dropdown backgrounds (#75-#77). **Performance**: Removed unnecessary table reloads on flag toggle, edits, and bulk operations (#78). **Mobile UX**: Added hamburger menu with sliding sidebar, duplicate button on cards, shift-click selection, category dropdown independence (#79-#82). **Additional**: Fixed checkbox double-toggle, Review tab duplication, removed filter emojis. **Testing**: 17/17 manual tests passed. Ready for production deployment.                                                                                                                    |
| 2026-02-01 | 2.23    | **READY FOR PRODUCTION v2.1.0**: Issue #70 (PRs #71, #72, #73): Complete feature-based architecture migration - all 55+ features verified present. API endpoint fixes - correct PATCH calls, CSRF tokens on all mutations. Review tab enhancements - full inline editing, duplicate functionality. UX improvements - removed confirm() dialogs, cleaner category display. **Validation**: 99/99 tests passing, build success, comprehensive code review complete. **Status**: develop branch ready for main deployment. **Manual testing required** before production merge.                                                                                                                                                                                                                                           |
| 2026-02-01 | 2.22    | **Review Tab Enhancements & UX Fixes**: Added edit and duplicate functionality to Review tab with full inline editing (fd0fd93a). Removed browser confirm() dialogs from delete actions - bad UX (93f6a110). Removed emoji display from category badges. **Closed Issues**: #59 (transaction edits), #33 (dual-write pattern), #5 (lazy loading). Branch `feature/integrate-cashflow-tab-issue-72` continues development.                                                                                                                                                                                                                                                                                                                                                                                              |
| 2026-01-30 | 2.21    | **Issue #72 Fixes - Feature Integration & Critical Bug Fixes**: Integrated CashFlow tab into feature-based architecture (commit ef84482e). Fixed transaction mutations - added missing CSRF tokens to all operations, corrected request formats to match API schema, fixed category display to use reference fields (commit c1f6c12e). Fixed 405 Method Not Allowed by correcting PATCH endpoint format (commit 9ba9a3da). **Resolved**: "nothing happens on save", "category not updating", "405 error on flag toggle". Branch `feature/integrate-cashflow-tab-issue-72` ready for testing. Awaiting Vercel preview deployment verification.                                                                                                                                                                          |
| 2026-01-29 | 2.20    | **PRODUCTION RELEASE v2.0.0**: Issue #60 (PR #64): Inline tag creation during transaction edit. Issue #37 Phase 1 (PR #65): Structured logging foundation with pino, custom error classes, correlation IDs. Issue #37 Phase 2 (PR #66): Migrated auth, transactions, tags routes to structured logging. Issue #33 (PR #67): Removed dual-write pattern - all categorization now uses ID-based system exclusively. Schema marked text fields as DEPRECATED. All PRs merged to develop, tests passing (90/90), build successful. Ready for production deployment.                                                                                                                                                                                                                                                        |
| 2026-01-29 | 2.19    | **Customer Complaint Resolution - Issue #58**: Fixed origin filter visibility in transaction review (PR #63). Root cause: parent container clipped Select dropdown. Added `overflow-visible` to desktop filters card. Customer reported "checkboxes hidden by dashboard" - dropdown now properly displays above other elements. Simple CSS fix resolves HIGH priority UX blocker.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2026-01-28 | 2.18    | **Critical Bug Fixes & Performance Sprint Complete**: Issue #5 (PR #61): Lazy loading for visualization libraries - reduced main page bundle by 119 KB (-23.7%), cash flow by 58 KB (-30.9%). Issue #59 (PR #62): Fixed transaction edit silent failures with comprehensive error handling - shows CSRF, validation, and auth errors to users. Issue #13 (PR #57): Mobile responsiveness Phase 1 complete with card views, filter sheets, and responsive tables. Created Issues #58-60 from customer feedback.                                                                                                                                                                                                                                                                                                         |
| 2026-01-28 | 2.17    | **Security & Quality Sprint Complete**: Issue #24 completed (PR #51): Comprehensive Zod validation for all API routes. Issue #26 completed (PR #50): CSRF protection with Double Submit Cookie pattern. Issue #20 completed (PR #52): Origin field standardized to 'Couple'. All mutation endpoints now have input validation + CSRF protection. 53/53 tests passing.                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 2026-01-27 | 2.16    | **Starting Issue #26**: Implementing CSRF protection for all API routes. Double Submit Cookie pattern. Issue #48 (DevOps improvements) completed and merged (PR #49). Starting Sprint 1 Phase 2.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 2026-01-27 | 2.15    | **DevOps Maturity Improvements (Issue #48)**: Completed and merged (PR #49). Added Prettier (code formatting), Husky + lint-staged (pre-commit hooks), commitlint (commit validation), ESLint security plugin (12 rules), coverage reporting, format checks in CI. Fixed 29 unit tests. DevOps Score: 4.5/10 -> 6.5/10 (+44%). Critical DevOps gaps analysis completed. Branch merged to develop.                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2026-01-27 | 2.14    | **Branch Structure Fix + Operating Rules + Stats Feature**: Fixed broken `develop` branch (recreated from `main`). Added Claude Workspace Operating Rules. Completed Stats/Dashboard Feature (Issue #28 - Phase 2) with interactive Recharts visualizations (line/pie charts), 4 key metric cards with month-over-month comparison, financial insights panel, top transactions sections, date range and origin filters. PR #43 merged.                                                                                                                                                                                                                                                                                                                                                                                 |
| 2026-01-26 | 2.13    | **Documentation Restructuring**: Split 98k char CLAUDE.md into focused documentation files. Created ARCHITECTURE.md, DATABASE.md, API_REFERENCE.md, COMPONENTS.md, DEVELOPMENT_GUIDE.md, SECURITY.md, KNOWN_ISSUES.md. CLAUDE.md now serves as concise entry point (~15k chars) with comprehensive documentation index. Improved documentation maintainability and navigation.                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 2026-01-26 | 2.12    | **Issue #28 Phase 2 Progress**: Completed Rules Feature implementation (PR #41 merged), created Stats Feature placeholder with useStats hook for data processing.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 2026-01-26 | 2.11    | **MANDATORY AI Agent Workflow Rules**: Added comprehensive workflow enforcement section for AI agents. Since GitHub Free doesn't enforce branch protection on private repos, AI agents MUST follow strict workflow.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 2026-01-26 | 2.10    | **Completed Issue #40 Implementation**: Created all GitHub configuration files, pushed develop branch to remote.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 2026-01-25 | 2.9     | **Resolved Issue #40**: Multi-environment deployment strategy with complete documentation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 2026-01-25 | 2.8     | **Resolved Issue #28 (Architecture)**: Complete page.tsx refactoring with fully functional proof-of-concept.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 2026-01-25 | 2.7     | **Partial Issue #28**: Page.tsx refactoring infrastructure created.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 2026-01-25 | 2.6     | **Resolved Issues #26, #30-32**: CSRF protection, Docker containerization, API versioning, cursor-based pagination.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 2026-01-25 | 2.5     | **Resolved Issues #24-25**: Comprehensive Zod validation, security headers (CSP + HSTS).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 2026-01-25 | 2.4     | **Resolved Issues #27, #29**: Complete CI/CD pipeline with GitHub Actions, test framework setup.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 2026-01-25 | 2.3     | **Resolved Issue #23**: Implemented Redis-based rate limiting with Upstash.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 2026-01-24 | 2.2     | Fixed repository URLs, added issues #27-38.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 2026-01-24 | 2.1     | Added Architecture Decision Records section (ADR-001, ADR-002).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 2026-01-23 | 2.0     | Initial comprehensive guide created.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 2025-12-27 | 1.0     | ML-ready system integration complete.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

---

**End of Changelog**
